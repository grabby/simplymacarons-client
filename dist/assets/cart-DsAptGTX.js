const m=[{id:"vanilla",name:"Vanilla Bean",description:"Classic Madagascar vanilla bean",price:2,minQuantity:10,image:"/src/assets/images/simply-macarons-pink-and-white.jpg",color:"pastel-yellow",category:"classic"},{id:"chocolate",name:"Double Chocolate",description:"Chocolate buttercream with ganache",price:2,minQuantity:10,image:"/src/assets/images/simply-macarons-double-chocolate.jpg",color:"pastel-blue",category:"classic"},{id:"strawberry",name:"Strawberry",description:"Fresh strawberry with real fruit",price:2,minQuantity:10,image:"/src/assets/images/simply-macarons-pretty-in-pink.jpg",color:"pastel-pink",category:"fruit"},{id:"lemon",name:"Lemon Buttercream",description:"Lemon buttercream with curd",price:2,minQuantity:10,image:"/src/assets/images/simply-macarons-lemon-buttercream.jpg",color:"pastel-yellow",category:"citrus"},{id:"raspberry",name:"Raspberry",description:"Sweet raspberry jam with berries",price:2,minQuantity:10,image:"/src/assets/images/simply-macarons-colourful-macarons.jpg",color:"pastel-pink",category:"fruit"},{id:"salted-caramel",name:"Creme Brulee",description:"Buttery caramel with sea salt",price:2,minQuantity:10,image:"/src/assets/images/simply-macarons-creme-brulee.jpg",color:"pastel-peach",category:"gourmet"},{id:"pistachio",name:"Pistachio",description:"Nutty pistachio with ground nuts",price:2,minQuantity:10,image:"/src/assets/images/simply-macarons-lime-green.jpg",color:"pastel-mint",category:"nut"},{id:"lavender",name:"Lavender",description:"Elegant lavender with honey",price:2,minQuantity:10,image:"/src/assets/images/simply-macarons-black-and-blue.jpg",color:"pastel-lavender",category:"floral"},{id:"matcha",name:"Matcha Green Tea",description:"Premium Japanese matcha",price:2,minQuantity:10,image:"/src/assets/images/simply-macarons-yellow-green-blue.jpg",color:"pastel-mint",category:"gourmet"},{id:"passion-fruit",name:"Fuzzy Peach",description:"Tropical peach with fuzzy texture",price:2,minQuantity:10,image:"/src/assets/images/simply-macarons-fuzzy-peach.jpg",color:"pastel-yellow",category:"tropical"},{id:"blueberry-lemonade",name:"Blueberry Lemonade",description:"Refreshing blueberry with lemonade",price:2,minQuantity:10,image:"/src/assets/images/simply-macarons-blueberry-lemonade.jpg",color:"pastel-blue",category:"fruit"},{id:"peanut-butter-chocolate",name:"Peanut Butter Chocolate",description:"Creamy peanut butter with chocolate",price:2,minQuantity:10,image:"/src/assets/images/simply-macarons-gold-white-green-black.jpg",color:"pastel-peach",category:"gourmet"},{id:"bubble-gum",name:"Bubble Gum",description:"The classic bubble gum with nostalgic taste",price:2,minQuantity:10,image:"/src/assets/images/simply-macarons-pink-and-white.jpg",color:"pastel-pink",category:"fun"},{id:"watermelon",name:"Watermelon",description:"Refreshing watermelon with summer sweetness",price:2,minQuantity:10,image:"/src/assets/images/simply-macarons-pink-green-chocolate-purple.jpg",color:"pastel-pink",category:"fruit"},{id:"earl-grey",name:"Earl Grey",description:"Sophisticated Earl Grey with bergamot",price:2,minQuantity:10,image:"/src/assets/images/simply-macarons-black-and-white.jpg",color:"pastel-blue",category:"gourmet"},{id:"guava",name:"Guava",description:"Tropical guava with exotic sweetness",price:2,minQuantity:10,image:"/src/assets/images/simply-macarons-colourful-macarons.jpg",color:"pastel-pink",category:"tropical"},{id:"cola",name:"Cola",description:"Classic refreshing cola flavour",price:2,minQuantity:10,image:"/src/assets/images/simply-macarons-black-and-blue.jpg",color:"pastel-blue",category:"fun"},{id:"cherry",name:"Cherry",description:"Sweet cherry with fruity burst",price:2,minQuantity:10,image:"/src/assets/images/simply-macarons-pretty-in-pink.jpg",color:"pastel-pink",category:"fruit"},{id:"apple",name:"Apple",description:"Crisp, sweet green apple",price:2,minQuantity:10,image:"/src/assets/images/simply-macarons-colourful.jpg",color:"pastel-green",category:"fruit"},{id:"banana",name:"Banana",description:"Creamy banana with natural sweetness",price:2,minQuantity:10,image:"/src/assets/images/simply-macarons-yellow-green-blue.jpg",color:"pastel-yellow",category:"fruit"},{id:"mango",name:"Mango",description:"Tropical mango with exotic notes",price:2,minQuantity:10,image:"/src/assets/images/simply-macarons-fuzzy-peach.jpg",color:"pastel-yellow",category:"tropical"},{id:"marshmallow",name:"Marshmallow",description:"Fluffy marshmallow with vanilla cream",price:2,minQuantity:10,image:"/src/assets/images/simply-macarons-pink-and-white.jpg",color:"pastel-pink",category:"fun"},{id:"cookies-and-cream",name:"Cookies and Cream",description:"Oreo-style cookies with vanilla",price:2,minQuantity:10,image:"/src/assets/images/simply-macarons-black-and-white.jpg",color:"pastel-blue",category:"gourmet"},{id:"cashew-caramel",name:"Cashew Caramel",description:"Buttery cashew with rich caramel",price:2,minQuantity:10,image:"/src/assets/images/simply-macarons-gold-white-green-black.jpg",color:"pastel-peach",category:"nut"},{id:"cinnamon",name:"Cinnamon",description:"Warm cinnamon with spice hint",price:2,minQuantity:10,image:"/src/assets/images/simply-macarons-colourful-macarons.jpg",color:"pastel-peach",category:"gourmet"},{id:"red-velvet",name:"Red Velvet",description:"Classic red velvet with cream cheese",price:2,minQuantity:10,image:"/src/assets/images/simply-macarons-pretty-in-pink.jpg",color:"pastel-pink",category:"gourmet"},{id:"biscoff",name:"Biscoff",description:"Speculoos cookie butter with caramel",price:2,minQuantity:10,image:"/src/assets/images/simply-macarons-gold-white-green-black.jpg",color:"pastel-peach",category:"gourmet"},{id:"cotton-candy",name:"Cotton Candy",description:"Sweet cotton candy with fluffy texture",price:2,minQuantity:10,image:"/src/assets/images/simply-macarons-pink-and-white.jpg",color:"pastel-pink",category:"fun"}],p=[{zone:"Zone 1 - Victoria Core",postalCodes:["V8M","V8N","V8P","V8R","V8S","V8T","V8V","V8W","V8X","V8Y","V8Z"],fee:5,description:"Victoria, Oak Bay, Saanich core"},{zone:"Zone 2 - Greater Victoria",postalCodes:["V9A","V9B","V9C","V9D","V9E","V9F","V9G","V9H","V9I","V9J","V9K","V9L","V9M","V9N","V9P","V9R","V9S","V9T","V9V","V9W","V9X","V9Y","V9Z"],fee:8,description:"Greater Victoria area"},{zone:"Zone 3 - Peninsula",postalCodes:["V0N","V0R"],fee:12,description:"Saanich Peninsula, Sidney, North Saanich"}],s={regularPrice:2,discountPrice:1.85,discountThreshold:60,minQuantityPerFlavor:10};class c{constructor(){this.items=new Map,this.deliveryZone=null,this.deliveryAddress="",this.pickupDate="",this.customerInfo={name:"",email:"",phone:"",notes:"",customFlavor:""},this.loadFromStorage()}addItem(t,e){if(e<s.minQuantityPerFlavor)throw new Error(`Minimum quantity per flavor is ${s.minQuantityPerFlavor}`);const a=m.find(r=>r.id===t);if(!a)throw new Error("Invalid flavor");this.items.set(t,{...a,quantity:e}),this.saveToStorage(),this.updateCartDisplay(),console.log("Cart updated:",{totalQuantity:this.getTotalQuantity(),items:Array.from(this.items.entries())})}removeItem(t){this.items.delete(t),this.saveToStorage(),this.updateCartDisplay()}updateQuantity(t,e){if(e===0){this.removeItem(t);return}if(e<s.minQuantityPerFlavor)throw new Error(`Minimum quantity per flavor is ${s.minQuantityPerFlavor}`);const a=this.items.get(t);a&&(a.quantity=e,this.saveToStorage(),this.updateCartDisplay())}getTotalQuantity(){return Array.from(this.items.values()).reduce((t,e)=>t+e.quantity,0)}getSubtotal(){const e=this.getTotalQuantity()>=s.discountThreshold?s.discountPrice:s.regularPrice;return Array.from(this.items.values()).reduce((a,r)=>a+r.quantity*e,0)}getDeliveryFee(){return 0}getTotal(){return this.getSubtotal()}getDiscountAmount(){return this.getTotalQuantity()<s.discountThreshold?0:Array.from(this.items.values()).reduce((e,a)=>e+a.quantity*(s.regularPrice-s.discountPrice),0)}setDeliveryZone(t){this.deliveryZone=null;for(const e of p)if(e.postalCodes.some(a=>t.toUpperCase().startsWith(a))){this.deliveryZone=e;break}this.saveToStorage(),this.updateCartDisplay()}setCustomerInfo(t){this.customerInfo={...this.customerInfo,...t},this.saveToStorage()}setDeliveryDetails(t,e="",a=""){this.deliveryType=t,this.deliveryAddress=e,this.pickupDate=a,this.saveToStorage()}clear(){this.items.clear(),this.deliveryZone=null,this.deliveryAddress="",this.pickupDate="",this.customerInfo={name:"",email:"",phone:"",notes:"",customFlavor:""},this.saveToStorage(),this.updateCartDisplay()}saveToStorage(){const t={items:Array.from(this.items.entries()),deliveryZone:this.deliveryZone,deliveryAddress:this.deliveryAddress,pickupDate:this.pickupDate,customerInfo:this.customerInfo,deliveryType:this.deliveryType};localStorage.setItem("simplyMacaronsCart",JSON.stringify(t))}loadFromStorage(){const t=localStorage.getItem("simplyMacaronsCart");if(t)try{const e=JSON.parse(t);this.items=new Map(e.items||[]),this.deliveryZone=e.deliveryZone,this.deliveryAddress=e.deliveryAddress||"",this.pickupDate=e.pickupDate||"",this.customerInfo=e.customerInfo||{name:"",email:"",phone:"",notes:"",customFlavor:""},this.deliveryType=e.deliveryType}catch(e){console.error("Error loading cart from storage:",e)}}updateCartDisplay(){const t=document.getElementById("cart-count"),e=document.getElementById("cart-items"),a=document.getElementById("cart-total"),r=document.getElementById("cart-discount"),o=document.getElementById("delivery-fee"),n=document.getElementById("final-total");if(t){const i=this.getTotalQuantity();t.textContent=i,i>0?(t.style.display="block",t.classList.remove("hidden"),console.log("Cart badge should be visible with quantity:",i)):(t.style.display="none",t.classList.add("hidden"),console.log("Cart badge should be hidden - empty cart"))}else console.warn("Cart count element not found");if(e){if(e.innerHTML="",this.items.size===0){e.innerHTML='<p class="text-gray-500 text-center py-8">Your cart is empty</p>';return}Array.from(this.items.values()).forEach(i=>{const l=document.createElement("div");l.className="flex items-center justify-between p-3 border-b border-gray-100",l.innerHTML=`
          <div class="flex-1">
            <h4 class="font-medium text-gray-900">${i.name}</h4>
            <p class="text-sm text-gray-600">$${i.price.toFixed(2)} each</p>
          </div>
          <div class="flex items-center space-x-2">
            <button onclick="cart.updateQuantity('${i.id}', ${i.quantity-1})" 
                    class="w-8 h-8 rounded-full bg-gray-100 hover:bg-gray-200 flex items-center justify-center">
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H4"></path>
              </svg>
            </button>
            <span class="w-8 text-center font-medium">${i.quantity}</span>
            <button onclick="cart.updateQuantity('${i.id}', ${i.quantity+1})" 
                    class="w-8 h-8 rounded-full bg-gray-100 hover:bg-gray-200 flex items-center justify-center">
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
              </svg>
            </button>
            <button onclick="cart.removeItem('${i.id}')" 
                    class="ml-2 text-red-500 hover:text-red-700">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
              </svg>
            </button>
          </div>
        `,e.appendChild(l)})}if(a&&(a.textContent=`$${this.getSubtotal().toFixed(2)}`),r){const i=this.getDiscountAmount();i>0?(r.textContent=`-$${i.toFixed(2)}`,r.parentElement.style.display="flex"):r.parentElement.style.display="none"}o&&(o.parentElement.style.display="none"),n&&(n.textContent=`$${this.getTotal().toFixed(2)}`)}generateOrderSummary(){const t=Array.from(this.items.values()),a=this.getTotalQuantity()>=s.discountThreshold?s.discountPrice:s.regularPrice,r=this.getDiscountAmount();let o=`
      <h2 style="color: #d94a4a; font-family: 'Playfair Display', serif; font-size: 24px; margin-bottom: 20px;">
        Simply Macarons - Order Summary
      </h2>
      
      <div style="background: #fef7f7; padding: 20px; border-radius: 12px; margin-bottom: 20px;">
        <h3 style="color: #7a2f2f; font-family: 'Quicksand', sans-serif; margin-bottom: 15px;">Order Details</h3>
        
        <table style="width: 100%; border-collapse: collapse;">
          <thead>
            <tr style="border-bottom: 2px solid #fbdcdc;">
              <th style="text-align: left; padding: 10px; color: #7a2f2f;">Flavor</th>
              <th style="text-align: center; padding: 10px; color: #7a2f2f;">Quantity</th>
              <th style="text-align: right; padding: 10px; color: #7a2f2f;">Price</th>
            </tr>
          </thead>
          <tbody>
    `;return t.forEach(n=>{const i=n.quantity*a;o+=`
        <tr style="border-bottom: 1px solid #fbdcdc;">
          <td style="padding: 10px; color: #7a2f2f;">${n.name}</td>
          <td style="text-align: center; padding: 10px; color: #7a2f2f;">${n.quantity}</td>
          <td style="text-align: right; padding: 10px; color: #7a2f2f;">$${i.toFixed(2)}</td>
        </tr>
      `}),o+=`
          </tbody>
        </table>
        
        <div style="margin-top: 20px; padding-top: 15px; border-top: 2px solid #fbdcdc;">
          <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
            <span style="color: #7a2f2f;">Subtotal:</span>
            <span style="color: #7a2f2f;">$${this.getSubtotal().toFixed(2)}</span>
          </div>
    `,r>0&&(o+=`
        <div style="display: flex; justify-content: space-between; margin-bottom: 5px; color: #22c55e;">
          <span>Bulk Discount (60+ macarons):</span>
          <span>-$${r.toFixed(2)}</span>
        </div>
      `),o+=`
      <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
        <span style="color: #7a2f2f;">Delivery Fee:</span>
        <span style="color: #7a2f2f;">TBD (will be confirmed after order review)</span>
      </div>
    `,o+=`
          <div style="display: flex; justify-content: space-between; font-weight: bold; font-size: 18px; margin-top: 10px; padding-top: 10px; border-top: 2px solid #fbdcdc;">
            <span style="color: #7a2f2f;">Total:</span>
            <span style="color: #7a2f2f;">$${this.getTotal().toFixed(2)}</span>
          </div>
        </div>
      </div>
    `,o+=`
      <div style="background: #fef7f7; padding: 20px; border-radius: 12px; margin-bottom: 20px;">
        <h3 style="color: #7a2f2f; font-family: 'Quicksand', sans-serif; margin-bottom: 15px;">Customer Information</h3>
        <p style="color: #7a2f2f; margin-bottom: 5px;"><strong>Name:</strong> ${this.customerInfo.name}</p>
        <p style="color: #7a2f2f; margin-bottom: 5px;"><strong>Email:</strong> ${this.customerInfo.email}</p>
        ${this.customerInfo.phone?`<p style="color: #7a2f2f; margin-bottom: 5px;"><strong>Phone:</strong> ${this.customerInfo.phone}</p>`:""}
        <p style="color: #7a2f2f; margin-bottom: 5px;"><strong>Delivery Type:</strong> ${this.deliveryType}</p>
        ${this.deliveryAddress?`<p style="color: #7a2f2f; margin-bottom: 5px;"><strong>Address:</strong> ${this.deliveryAddress}</p>`:""}
        ${this.pickupDate?`<p style="color: #7a2f2f; margin-bottom: 5px;"><strong>Preferred Date:</strong> ${this.pickupDate}</p>`:""}
        ${this.customerInfo.notes?`<p style="color: #7a2f2f; margin-bottom: 5px;"><strong>Notes:</strong> ${this.customerInfo.notes}</p>`:""}
        ${this.customerInfo.customFlavor?`<p style="color: #7a2f2f; margin-bottom: 5px;"><strong>Custom Flavor Request:</strong> ${this.customerInfo.customFlavor}</p>`:""}
      </div>
    `,o}}window.cart=new c;document.addEventListener("DOMContentLoaded",()=>{window.cart||(window.cart=new c),cart.updateCartDisplay(),setTimeout(()=>{cart.updateCartDisplay()},100)});export{m};
